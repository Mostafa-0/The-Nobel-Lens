const API_KEY="AIzaSyD9MDXOiRXi1bjHRtbA_NB433soVvfR6-Q",contents=[{role:"user",parts:[{text:"Your name is Prizetron, You are an expert in the field of nobel prize and laureates. \n        I will ask you questions related to the nobel prize, laureates and fields and I might have a special intrest in IEEE members or egyptians who won the prize. \n        Your answers should be short, direct, and straight to the point, and don't use text formatters like ## and **.\n        Also don't forget to introduce yourself at first"}]}],chat=document.getElementById("chatbot-chat"),input=document.getElementById("chatbot-input"),handleSubmit=async()=>{contents.push({role:"user",parts:[{text:input.value}]});const t=document.createElement("p");t.innerText=input.value,t.classList.add("user_chat"),chat.appendChild(t);const e=document.createElement("p");e.innerText="Loading...",e.classList.add("bot_chat"),chat.appendChild(e);const n=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro-latest:generateContent?key=${API_KEY}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({contents:contents,generationConfig:{temperature:1,topK:0,topP:.95,maxOutputTokens:8192,stopSequences:[]},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_ONLY_HIGH"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_ONLY_HIGH"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_ONLY_HIGH"}]})}),{candidates:a}=await n.json();a||(e.innerText="I couldn't understand your question. Could you please repeat it in a different form?");const{content:o}=a[0];contents.push(o),e.innerText=o.parts[0].text,input.value=""};document.getElementById("chatbot-submit").addEventListener("click",handleSubmit),input.addEventListener("keypress",(t=>{"Enter"===t.key&&handleSubmit()}));const chatBox=document.querySelector(".chat-container"),chatbotBtn=document.querySelector(".chatbot-btn"),closeBtn=document.querySelector(".close-btn");chatbotBtn.addEventListener("click",(()=>{chatBox.classList.toggle("chatbot-active")})),closeBtn.addEventListener("click",(()=>{chatBox.classList.remove("chatbot-active")})),document.addEventListener("click",(t=>{chatBox.classList.contains("chatbot-active")&&(chatBox.contains(t.target)||chatbotBtn.contains(t.target)||chatBox.classList.remove("chatbot-active"))}));